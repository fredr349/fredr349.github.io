<html>

<style>
    main {
        width: 40%;
        margin-left: auto;
        margin-right: auto;
    }

    .red {
        background-color: gray;
    }
</style>

<body>
    <main>
    <div>
    <label for="billamt">Bill $</label>
    <input type="text" id="billamt" oninput="calculateTotal(this)">
    </div>
    <div>
    <label for="tippct">Tip %</label>
    <input type="range" min="5" max="30" id="tippct" oninput="updateSlider(); calculateTotal(this);"> <span id="tipval"></span>
    </div>
    <div>
    <label for="people">Number of People</label>
    <select id="people" onchange="calculateTotal(this)">
        <option value="1">one</option>
        <option value="2">two</option>
        <option value="3">three</option>
        <option value="4">four</option>
    </select>
    </div>

    <div>
        Amount to Pay <span id="payamt"></span>
    </div>
        <button onclick="saveHistory()">Save</button>
    </main>
    <table id="historytable">
    </table>

    <script>
        "use strict";

        function calculateTotal(obj) {
            var bill = document.querySelector("#billamt");
            var initialAmt = bill.value;
            var tipVal = document.querySelector("#tippct").value;
            var numPeople = document.querySelector("#people").value;
            var total = initialAmt * (1 + (tipVal / 100)) / numPeople;
            var result = document.querySelector("#payamt");

            result.innerHTML = total;

        }

        function updateSlider() {
            var currentVal = document.querySelector("#tippct").value;
            document.querySelector("#tipval").innerHTML = currentVal;
        }

        function saveHistory() {
            var tbl = document.querySelector("#historytable");
            var tr = document.createElement("tr");
            tbl.appendChild(tr);
            var td = document.createElement("td");
            td.innerHTML = document.querySelector("#billamt").value;
            tr.appendChild(td);
            td = document.createElement("td");
            td.innerHTML = document.querySelector("#people").value;
            tr.appendChild(td);
            tr.classList.add("red");
        }

        window.onload = updateSlider;
    </script>

</body>
</html>
